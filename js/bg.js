(()=>{var t={856:t=>{t.exports=function(){if(chrome.runtime.setUninstallURL){const t=`https://report.etoolmaster.com/?ws_id=${chrome.runtime.id}&version=${chrome.runtime.getManifest().version}`;chrome.runtime.setUninstallURL(t)}}},178:t=>{t.exports={t:["headers","advanced_params","bulk_advanced","query_hashes","doc_id","rate_us","success_dw"],i:"jpg",u:"x-instagram-ajax",_:"x-ig-app-id",l:"x-ig-app-id_upload",h:"baseUserFeedInfo",m:"req_id",$:1,g:"mp4",p:"x-csrftoken",v:2,S:7,q:9,P:"scrollUserFeedInfo",k:13,I:"x-asbd-id",D:"https://check.browserlisting.com/toolkit_user.json",T:"fb_dtsg",R:"userFeed",A:"repost",U:"_mk",C:"x-ig-www-claim",N:"x-requested-with",O:2,H:"doc_id",M:12,L:"req_l"}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{const t={F:"*://*.instagram.com/*",B:function(t,e){t<0||chrome.tabs.get(t,(function(t){e(t.url)}))},j:function(t){const e=this;chrome.tabs.query({url:[e.F]},(function(n){let r=[];n.forEach((function(n){r.push(n.id),e.J(r,t)}))}))},J:function(t,e){const n=this;if(0===t.length)return e(!1);let r=t.pop();chrome.tabs.sendMessage(r,"isBulkDownloadNowInTab",(function(r){r&&e(!0),n.J(t,e)}))}},e={V:[],G:function(t){let e=t.match(/variables=([^&]+)/);return e&&e[1]||null},K:function(t){let e=t.match(/query_hash=([^&]+)/);return e&&e[1]||null},W:function(){void 0===NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),void 0===HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach)},Z:function(t){let e=new Date,n=new Date(e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()).getTime();return Math.floor((n-864e5*t)/1e3)},X:function(t){let e=[];return t.forEach((function(t){e=e.concat(t)})),e},Y(){const t=Math.floor(5*Math.random())+6;let e="";for(let n=0;n<t;n++){e+=Math.floor(10*Math.random()).toString()}return e},tt:function(t,e){let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onreadystatechange=function(){4===this.readyState&&(200===this.status?e(this.response):e())},n.send()},et:function(){let t=location.pathname.match(/(?<=\/p\/|\/reel\/|\/reels\/videos\/|\/reels\/).*?(?=\/)/);return t&&t[0]},nt:function(t){if(!t||!t.tagName)return null;let n;if("a"===t.tagName.toLowerCase())n=t.getAttribute("href");else{let e=t.querySelector('a[href*="/p/"], a[href*="/tv/"], a[href*="/reel/"]');e&&e.hasAttribute("href")&&(n=e.getAttribute("href"))}if(n){let t=n.match(/\/(tv|p|reel)\/([^/]+)/);return t&&t[2]}return e.rt()||e.ot()?e.et():void 0},it:function(){return"/"===location.pathname&&"instagram.com"===location.host.replace(/^w{3}\./,"")&&null==document.querySelector('input[name="username"]')},ut(){let t=location.pathname.match("^/reels/audio/[0-9]+/$");return t&&t[0]},rt(){let t=location.pathname.match("^/reel/.*/$");return t&&t[0]},st:function(){return/\/*.+\/saved\/all-posts\/$|\/saved\/*.+\/[0-9]+\/$/.test(location.pathname)},ct:function(){return!document.querySelector('[role="dialog"]')&&(null!==document.querySelector('a[href*="/tagged/"]')||null!==document.querySelector('a[href*="/followers/"]')||null!==document.querySelector('a[href*="/following/"]'))},_t:function(){let t=location.pathname.match("^/reels/.*/$");return t&&t[0]},ft:function(){return this.ct()&&location.href.includes("/tagged/")},lt:function(){return this.ct()&&location.href.includes("/guides/")},dt:function(){return null!==document.querySelector('a[href^="/accounts/edit"]')},ht:function(){return this.dt()&&location.href.includes("/saved/")},$t:function(){return/instagram\.com\/stories\/[^/]+\//.test(location.href)},gt:function(){return"/explore/"===location.pathname},yt:function(){return/instagram\.com\/explore\/locations\/[^/]+\//.test(location.href)},vt:function(){return/instagram\.com\/explore\/tags\/[^/]+\//.test(location.href)},ot:function(){return/instagram.com\/(p|tv|reel)\/[^/]+\//.test(location.href)},wt:function(){return top!==self},bt:function(){return location.pathname.includes("stories/highlights")},xt:function(t,e){if(!t)return null;let n=t.match(/\/([^\/?]+)(?:$|\?)/);return n=n&&n[1],n?(e&&(n=e+"_"+n),n):null},St:function(t){return!("string"!=typeof t||-1!=t.indexOf("blob:")||!t.match(/\.(png|jpg|mp4|flv)/))},qt:function(t){e.Pt("getQueryHashes",t)},kt:function(t,e,n){if(!t||!t.url)return n();var r={url:t.url};t.filename&&(r.filename=t.filename),chrome.downloads.download(r,(function(e){e?n(e):chrome.downloads.download({url:t.url},(function(t){n(t)}))}))},It:function(t,e){this.Pt({action:"downloadFile",options:{url:t.url,filename:t.filename,isStory:void 0!==t.isStory}},(function(t){"function"==typeof e&&e(t)}))},Dt:function(t,e,n){t.sort((function(t,r){var o=parseInt(t[e]),i=parseInt(r[e]);return n?o<i?1:o>i?-1:0:o>i?1:o<i?-1:0}))},Tt:function(t){var e,n,r;for(r=t.length-1;r>0;r--)e=Math.floor(Math.random()*(r+1)),n=t[r],t[r]=t[e],t[e]=n;return t},Rt:function(){if(location.href.indexOf("instagram.com/p/")>-1)return null;var t=location.href.match(/instagram\.com\/([^\/]+)/);return t&&t[1].trim()||null},Pt:function(t,e){void 0===e?chrome.runtime.sendMessage(t):chrome.runtime.sendMessage(t,e)},At:function(t){var e=0;return t.querySelectorAll("ul li").forEach((function(t){t.querySelector("video")?e++:t.querySelectorAll("img").forEach((function(t){t.width>200&&t.height>200&&e++}))})),e>1},Ut:function(t){if(!t)return 0;for(var e=t.querySelectorAll("div div div div"),n=0,r=[];e[n];){var o=e[n];if(n++,o.offsetHeight<10&&o.offsetHeight===o.offsetWidth&&o.parentElement.offsetWidth>20*o.parentElement.offsetHeight){var i=o.parentElement.children,u=!0;if(i.forEach((function(t){t.offsetHeight<10&&t.offsetHeight===t.offsetWidth||(u=!1)})),i.length>1&&u){r=i;break}}}var s=0,c=0;return r.forEach((function(t,e){t.classList.length>c&&(c=t.classList.length,s=e)})),s},Ct:function(t){var e=Math.floor(parseInt(t)/60).toString(),n=Math.floor(parseInt(t)%60).toString();return 1===e.length&&(e="0"+e),1===n.length&&(n="0"+n),e+":"+n},Et:function(){let t=document.querySelector("section main header section h2,section main header section h1,section main header section h3");if(t){let e=t.closest("section");return e&&(e.style.overflow="visible"),e&&e.querySelector("div>div")||e||null}},Nt:function(t){return t.querySelector("video")},Ot:function(t){var e=t.getAttribute("src");if(e)return e;var n=t.querySelector("source");return n&&(e=n.getAttribute("src"))?e:null},Ht:function(t){if(t.querySelector('svg path[d="m12.823 1 2.974 5.002h-5.58l-2.65-4.971c.206-.013.419-.022.642-.027L8.55 1Zm2.327 0h.298c3.06 0 4.468.754 5.64 1.887a6.007 6.007 0 0 1 1.596 2.82l.07.295h-4.629L15.15 1Zm-9.667.377L7.95 6.002H1.244a6.01 6.01 0 0 1 3.942-4.53Zm9.735 12.834-4.545-2.624a.909.909 0 0 0-1.356.668l-.008.12v5.248a.91.91 0 0 0 1.255.84l.109-.053 4.545-2.624a.909.909 0 0 0 .1-1.507l-.1-.068-4.545-2.624Zm-14.2-6.209h21.964l.015.36.003.189v6.899c0 3.061-.755 4.469-1.888 5.64-1.151 1.114-2.5 1.856-5.33 1.909l-.334.003H8.551c-3.06 0-4.467-.755-5.64-1.889-1.114-1.15-1.854-2.498-1.908-5.33L1 15.45V8.551l.003-.189Z"]'))return!0;{let e=t.querySelector("video,img"),n=getComputedStyle(e);return this.Mt(parseInt(n.width)/parseInt(n.height))}},Mt:t=>t>=.5&&t<=.6||t===9/16,Lt:function(t){if(!t)return null;var e=t.getAttribute("srcset");if(e){var n={};e.split(",").forEach((function(t){var e=t.split(" "),r=e[1].replace(/[^\d]/,"");n[r]||(n[r]=e[0])}));var r=0;for(var o in n)+o>+r&&(r=o);var i=n[r]}return"string"==typeof i&&i.match(new RegExp("\\.(jpg|png)"))||(i=t.getAttribute("src")),i},Ft:function(t){let e=null,n=t.querySelectorAll("img[src], img[srcset]");if(1===n.length)e=n[0];else if(n.length>1)for(let t=0;n[t];t++)n[t].width<200||n[t].height<200||(n[t].getAttribute("src")||n[t].getAttribute("srcset"))&&(e=e||n[t],n[t].width>e.width&&n[t].height>e.height&&(e=n[t]));return e||null},Bt:function(t,e){chrome.runtime.sendMessage({action:"requestUserId",userName:t},(function(t){if(!t||t&&t.err)return e(null);e(t.userId)}))},jt:function(t,e){chrome.runtime.sendMessage({action:"requestUserPostCount",userName:t},(function(t){if(!t||t&&t.err)return e(null);e(t.postCount)}))},Jt:function(t,e){let n=t.width||t.config_width||null,r=e.width||e.config_width||null,o=t.height||t.config_height||null,i=e.height||e.config_height||null;return n&&r&&n!==o&&r!==i?n!==r?r>n?1:-1:i>o?1:-1:0},Vt:function(t,e){e&&!Array.isArray(e)&&(e=[e]);for(var n,r=[],o={"{":0,"[":0},i={"}":"{","]":"["},u=/[{}\]\[":0-9.,-]/,s=/[\r\n\s\t]/,c="",a=0;n=t[a];a++)if('"'!==n)u.test(n)?(c+=n,"{"===n||"["===n?(o["{"]||o["["]||(c=n),o[n]++):"}"!==n&&"]"!==n||(o[i[n]]--,o["{"]||o["["]||r.push(c))):"t"===n&&"true"===t.substr(a,4)?(c+="true",a+=3):"f"===n&&"false"===t.substr(a,5)?(c+="false",a+=4):"n"===n&&"null"===t.substr(a,4)?(c+="null",a+=3):s.test(n)||(o["{"]=0,o["["]=0,c="");else{for(var _=a;-1!==_&&(_===a||"\\"===t[_-1]);)_=t.indexOf('"',_+1);-1===_&&(_=t.length-1),c+=t.substr(a,_-a+1),a=_}var f,l=[];for(a=0;f=r[a];a++)if("{}"!==f&&"[]"!==f)try{e?e.every((function(t){return t.test(f)}))&&l.push(JSON.parse(f)):l.push(JSON.parse(f))}catch(t){}return l},Qt:function(){return Array.from(document.querySelectorAll("section")).find((t=>!t.closest("[hidden]")))},Gt:function(){const t=this.Qt();return Array.from(t.querySelectorAll("div")).find((t=>{let e=t.clientHeight||t.offsetHeight;if(e>0&&e<6)return t.parentElement}))},Kt:function(){const t=this.Gt();if(!t)return 0;let e=t.querySelectorAll("div[style]");return e&&e.length?(e=e[e.length-1].parentElement||null,null==e?0:t.children&&Array.from(t.children).indexOf(e)||0):0},Wt(t){t.length>28&&(t=t.substr(0,t.length-28));const e="abcdefghijklmnopqrstuvwxyz",n=e.toUpperCase()+e+"0123456789-_";let r=BigInt(0);for(let e of t){let t=n.indexOf(e);r*=BigInt(64),r+=BigInt(t)}return r.toString()}},r=e,o={zt:function(e){const n=this;let o=e.url,i=r.G(o),u=r.K(o);if(i&&u){i=decodeURIComponent(i);try{i=JSON.parse(i)}catch(t){}i.shortcode&&i.child_comment_count?n.Zt("post",u):i.id&&i.first&&i.after&&t.B(e.tabId,(function(t){/\/channel\/|\/tagged\/|\/guides\//.test(t)?t.includes("/channel/")&&n.Zt("channel",u):n.Zt("owner",u)}))}},Xt:function(){chrome.storage.local.get("query_hashes",(function(t){t.query_hashes||chrome.storage.local.set({query_hashes:{owner:"8c2a529969ee035a5063f2fc8602a0fd",post:"2efa04f61586458cef44441f474eee7c",channel:"bc78b344a68ed16dd5d7f264681c4c76"}})})),chrome.webRequest.onBeforeSendHeaders.addListener(this.zt.bind(this),{urls:["*://*.instagram.com/graphql/query/?*"],types:["xmlhttprequest"]},["requestHeaders"])},Zt:function(t,e){chrome.storage.local.get("query_hashes",(function(n){n.query_hashes[t]=e,chrome.storage.local.set({query_hashes:n.query_hashes})}))},qt:function(){return chrome.storage.local.get("query_hashes").then((function(t){if(t.query_hashes)return t.query_hashes;throw"No query_hashes"}))}};var i=n(178),u=n.n(i);const s={Yt:{"x-instagram-ajax":"017fef72480c","x-asbd-id":"437806","x-requested-with":"XMLHttpRequest","x-ig-app-id":"936619743392459","x-ig-app-id_upload":"1217981644879628"},te:function(t){this.ee().then((function(e){chrome.storage.local.set({headers:{...e,...t}})})).catch((function(){chrome.storage.local.set({headers:t})}))},ee:function(){return chrome.storage.local.get("headers").then((function(t){if(t.headers)return t.headers;throw"No headers"}))},ne:function(t){return this.ee().then((function(e){let n=[];for(let r=0;t[r];r++){if(!e.hasOwnProperty(t[r]))throw`Not found requested header [${t[r]}]`;n[t[r]]=e[t[r]]}return n}))},re(t){let e=t.requestBody||null;if(!e)return;let n=e.formData&&e.formData.fb_dtsg||null;n=n&&n.length&&n[0]||null,n&&chrome.storage.local.set({fb_dtsg:n})},oe:function(t){const e=[u().C,u().u,u().I,u().N,u()._],n={};for(let r=0;t.requestHeaders[r];r++){let o=t.requestHeaders[r];e.includes(o.name.toLowerCase())&&o.value.length&&(n[o.name.toLowerCase()]=o.value),this.te(n)}},ie:function(t){const e=u()._,n={};for(let r=0;t.requestHeaders[r];r++){let o=t.requestHeaders[r];if(e===o.name.toLowerCase()&&o.value.length){n[e]=o.value;break}this.te(n)}},Xt:function(){const t=this;t.ee().catch((function(){t.te(t.Yt)})),chrome.webRequest.onBeforeSendHeaders.addListener(t.oe.bind(t),{urls:["*://*.instagram.com/*"],types:["xmlhttprequest"]},["requestHeaders"]),chrome.webRequest.onBeforeRequest.addListener(t.re.bind(t),{urls:["*://*.instagram.com/*"],types:["xmlhttprequest"]},["requestBody"]),chrome.webRequest.onBeforeSendHeaders.addListener(t.ie.bind(t),{urls:["*://*.instagram.com/rupload_igphoto/*","*://*.instagram.com/rupload_igvideo/*","*://*.instagram.com/api/v1/web/create/*"],types:["xmlhttprequest"]},["requestHeaders"])}},c={ue:function(){return chrome.cookies?chrome.cookies.getAll({url:"https://*.instagram.com"}).then((function(t){let e={};if(t.forEach((function(t){e[t.name]=t.value})),e.ds_user_id&&e.sessionid)return e;throw"Not authorized"})):Promise.resolve()},se:function(){return this.ue().then((function(t){return t&&t.csrftoken||null}))}},a={ce:{userFeed:{title:"PolarisProfilePostsQuery_instagramRelayOperation",doc_id:{baseUserFeedInfo:{defaultValue:"8633614153419931",regexPattern:/PolarisProfilePostsQuery_instagramRelayOperation",\[\],\(function\(a,b,c,d,e,f\){e\.exports="(\d+)"/},scrollUserFeedInfo:{defaultValue:"8656566431124939",regexPattern:/PolarisProfilePostsTabContentQuery_connection_instagramRelayOperation",\[\],\(function\(a,b,c,d,e,f\){e\.exports="(\d+)"/}}}},ae(){let t=this;chrome.storage.local.get(u().H).then((function(e){if(!(e&&e.doc_id||null))return t._e([u().R])}))},_e(t){let e=this;return new Promise((async function(n,r){if(!t||!t.length)return r({error:"no_doc_tasks"});let o=Array.from(document.querySelectorAll('script[src*="static.cdninstagram.com/rsrc.php"]')).map((function(t){return t.src})),i=Array.from(performance.getEntries()).filter((function(t){return t.name.includes(".js")&&t.name.includes("static.cdninstagram.com/rsrc.php")})).map((function(t){return t.name})),u=o;if(i.forEach((function(t){u.includes(t)||u.push(t)})),!u.length)return r({error:"no_doc_id_scripts"});let s=[];for(let n=0;n<u.length;++n){let r=await fetch(u[n],{}).catch((function(){}));if(!r)continue;let o=await r.text().catch((function(){}));if(o){for(let n of t){if(s.includes(n))continue;let t=o.indexOf(e.ce[n].title);if(t>0){o=o.substring(t);for(let t in e.ce[n].doc_id){if(e.ce[n].doc_id[t].regexPattern){let r=o.match(e.ce[n].doc_id[t].regexPattern),i=r&&r[1]||null;if(i){s.push(t),await e.fe(t,i);continue}}if((e.ce[n].doc_id[t].token&&o.indexOf(e.ce[n].doc_id[t].token)||-1)<0)continue;const r=/params:\s*{\s*id:\s*"(\d+)"\s*,/.exec(o);let i=null;r&&(i=r[1]),i&&(s.push(t),await e.fe(t,i))}}}if(s.length>=t.length)break}}return s.length<t.length?r({error:"not_found_requested_keys",found:s,requested:t}):n()}))},fe:(t,e)=>chrome.storage.local.get(u().H).then((function(n){let r=n.doc_id||{};return r[t]={value:e,updated_value_tm:Date.now()},chrome.storage.local.set({doc_id:r})})),le(t){let e=this;return new Promise((function(n){return e.de(t).then((function(t){return n(t)})).catch((function(n){return e._e([u().R]).then((function(){return e.de(t)}))})).catch((function(r){let o=e.ce[u().R].doc_id[t]||null;n(o.defaultValue||null)}))}))},de:t=>new Promise((function(e,n){return chrome.storage.local.get(u().H).then((function(r){let o=r.doc_id&&r.doc_id[t]||null;return o=o&&o.value,o&&e(o)||n()}))}))},_={he:(t,e)=>(e=e||{},fetch(t,e).then((function(e){if(200!==e.status&&202!==e.status)throw`request error [${t}]`;return e}))),me(t,e){return this.he(t,e).then((function(t){return t.json()}))},$e:function(t,e){return this.he(t,e).then((function(t){return t.text()}))},ge(t){const e=this,n=[u().u,u().I,u()._,u().N];let r;return c.se().then((function(t){return r=t,s.ne(n)})).then((function(n){return e.me(t,{headers:{...n,"x-csrftoken":r}})}))},pe(t,e){const n=this,o=[u().I,u()._];let i;return r.Pt(),c.se().then((async function(t){return t||(t=await n.ye()),i=t,s.ne(o)})).then((function(r){return n.me(t,{headers:{...r,"x-csrftoken":i,"x-fb-friendly-name":"PolarisProfilePostsQuery",accept:"*/*","content-type":"application/x-www-form-urlencoded"},credentials:"include",method:"POST",body:new URLSearchParams(e).toString()})}))},ve(t,e,n){const r=this,o=[u().u,u().l,u().I,u().N];let i;return n=n||{},c.se().then((async function(t){return t||(t=await r.ye()),i=t,s.ne(o)})).then((function(o){return o[u()._]=o[u().l],delete o[u().l],r.he(t,{method:"POST",body:e,headers:{...o,...n,"x-csrftoken":i}})}))},ye:()=>new Promise((function(t,e){chrome.runtime.sendMessage("getCsrftoken",(function(n){n?t(n):e()}))})),we:()=>new Promise((function(t,e){chrome.runtime.sendMessage("getCookies",(function(n){n?t(n):e()}))})),be:function(t,e){const n=this;if(!t)return e(null);const r=`https://www.instagram.com/p/${t}/`,o=[u().u,u().I,u()._,u().N];let i;return c.se().then((function(t){return i=t,s.ne(o)})).then((function(t){return n.$e(r,{headers:{...t,"x-csrftoken":i,accept:"text/html"}})})).then((function(t){e(t)}))},xe:function(t,e){s.ee().then((n=>{let r="https://i.instagram.com/api/v1/users/web_profile_info/?username="+t,o={method:"GET",headers:n};o.headers["content-type"]="application/x-www-form-urlencoded",this.me(r,o).then((function(t){let n=t&&t.data&&t.data.user&&t.data.user.id||null;if(!n)throw`Not found userId [${JSON.stringify(t)}]`;e({userId:n})})).catch((function(){e({error:1})}))}))},Se:function(t,e){s.ee().then((n=>{let r="https://i.instagram.com/api/v1/users/web_profile_info/?username="+t,o={method:"GET",headers:n};o.headers["content-type"]="application/x-www-form-urlencoded",this.me(r,o).then((function(t){let n=t&&t.data&&t.data.user&&t.data.user.edge_owner_to_timeline_media&&t.data.user.edge_owner_to_timeline_media.count||null;if(!n)throw`Not found postCount [${JSON.stringify(t)}]`;e({postCount:n})})).catch((function(){e({error:1})}))}))},qe:function(t,e){const n="https://i.instagram.com/api/v1/feed/user/"+t+"/story/";this.ge(n).then((function(t){e(t)})).catch((function(){e({error:1})}))},Pe:function(t,e){const n=`https://i.instagram.com/api/v1/feed/reels_media/?reel_ids=${encodeURIComponent(t)}`;this.ge(n).then((function(t){e(t)})).catch((function(){e({error:1})}))},ke:function(t,e){const n=this;o.qt().then((function(e){const r="https://www.instagram.com/graphql/query/?query_hash="+e[t.request_type]+"&variables="+encodeURIComponent(JSON.stringify(t.data));return n.ge(r)})).then((function(t){e(t)})).catch((function(t){e({error:1})}))},Ie:function(t,e){const n=this;let r=t.after||null,o=r?u().P:u().h;a.le(o).then((function(o){if(!o)return e(null);chrome.storage.local.get("fb_dtsg",(function(i){let u=i&&i.fb_dtsg||null,s={data:{count:12,include_relationship_info:!0,latest_besties_reel_media:!0,latest_reel_media:!0},username:t.userName,__relay_internal__pv__PolarisIsLoggedInrelayprovider:!0,__relay_internal__pv__PolarisFeedShareMenurelayprovider:!0};r&&(s={...s,first:12,last:null,after:r||"",before:null}),s=JSON.stringify(s);let c={fb_dtsg:u,variables:s,doc_id:o,fb_api_caller_class:"RelayModern",fb_api_req_friendly_name:"PolarisProfilePostsQuery",server_timestamps:!0};n.pe("https://www.instagram.com/graphql/query",c).then((function(t){e(t)})).catch((function(t){e({error:1})}))}))}))},De:function(t,e){const n=`https://www.instagram.com/api/v1/media/${t.data.pk}/info/`;return this.ge(n).then((function(t){e(t)})).catch((function(t){e({error:1})}))},Te:function(t,e){let n="https://www.instagram.com/"+t+"/";this.he(n).then((function(t){return t.text()})).then((function(t){let r=t.match(/\"profile_id\":\s?\"(\d+)/);if(r=r&&r[1],!r)throw`not received userId [${n}]`;e(r)})).catch((function(){return e()}))},Re:function(t,e){const n=`https://www.instagram.com/rupload_igphoto/${"reels"===t.destination?"fb_uploader":t.destination}_${t.upload_id}`,r=new Uint8Array(t.data).buffer,o={"x-entity-length":t.data.length,"x-entity-name":`${t.destination}_${t.upload_id}`,"x-entity-type":"image/jpeg",offset:"0","x-instagram-rupload-params":JSON.stringify({media_type:"reels"===t.destination?"2":"1",upload_id:t.upload_id,upload_media_height:t.media_height,upload_media_width:t.media_width})};this.ve(n,r,o).then((function(){e(!0)})).catch((function(){e()}))},Ae:function(t,e){const n=`https://www.instagram.com/rupload_igvideo/${"reels"===t.destination?"fb_uploader":t.destination}_${t.upload_id}`,r=new Uint8Array(t.data).buffer,o={media_type:"2",upload_id:t.upload_id,upload_media_height:t.media_height,upload_media_width:t.media_width,video_format:"",video_transform:null,upload_media_duration_ms:t.duration,"client-passthrough":"1",is_sidecar:"0",for_album:"story"===t.destination,is_clips_video:"reels"===t.destination};"feed"===t.destination&&(o.is_unified_video="0");const i={"x-entity-length":t.data.length,"x-entity-name":`${t.destination}_${t.upload_id}`,offset:"0","x-instagram-rupload-params":JSON.stringify(o)};this.ve(n,r,i).then((function(){e(!0)})).catch((function(){e()}))},Ue:function(t,e){let n,r="story"===t.destination,o={upload_id:t.upload_id,caption:t.caption};"reels"===t.destination?(n="api/v1/media/configure_to_clips/",o.clips_share_preview_to_feed=!0===t.shareReelsToFeed?"1":"0"):n="create/"+(r?"configure_to_story/":"configure/");const i=this,u="https://www.instagram.com/"+n,s=new URLSearchParams(o);return r&&void 0===t.previous_count?this.Ce((function(e){return t.previous_count=e,c()})):c();function c(){return i.ve(u,s).then((function(){if(r)return i.Ee(t,e);e(!0)})).catch((function(){e()}))}},Ee:function(t,e){const n=this;return t.attempt=t.attempt||0,n.Ce((function(r){if(!(r>t.previous_count)){if(t.attempt>3)throw"FAIL";return t.attempt++,n.Ue(t,e).then((function(){return new Promise((function(r){setTimeout((function(){r(n.Ee(t,e))}),300)}))}))}e(!0)}))},Ce:function(t){const e=this;return c.ue().then((async function(n){if(n||(n=await e.we()),!n)return Promise.reject();const r="https://i.instagram.com/api/v1/feed/user/"+n.ds_user_id+"/story/";return s.ne(["x-ig-www-claim","x-ig-app-id"]).then((function(o){return e.me(r,{method:"GET",headers:{...o,"x-csrftoken":n.csrftoken},credentials:"include"}).then((function(e){return t(e&&e.reel&&e.reel.items&&e.reel.items.length||0)}))}))}))}},f=function(){chrome.runtime.onConnect.addListener((function(t){})),chrome.action.onClicked.addListener((function(){chrome.tabs.create({url:"https://www.instagram.com/"})})),chrome.runtime.onMessage.addListener((function(e,n,i){if(e)if("string"==typeof e)switch(e){case"getCookies":return c.ue().then(i).catch((()=>i)),!0;case"getAllHeaders":return s.ee().then(i).catch((()=>i)),!0;case"getQueryHashes":return o.qt().then(i).catch((()=>i)),!0;case"checkBulkDownloadNow":return t.j(i),!0;case"getCsrftoken":return c.se().then(i).catch((()=>i)),!0;case"is_bulk_advanced":return chrome.storage.local.get("bulk_advanced",(function(t){i(t.bulk_advanced)})),!0;default:return}else if("object"==typeof e&&"string"==typeof e.action)switch(e.action){case"downloadFile":return r.kt(e.options,n,i),!0;case"bulk_advanced":chrome.storage.local.set({bulk_advanced:e.value});break;case"requestHighlights":return _.Pe(e.reel_ids,i),!0;case"requestHtmlByShortcode":return _.be(e.shortcode,i),!0;case"requestStories":return _.qe(e.userId,i),!0;case"requestUserId":return _.xe(e.userName,i),!0;case"requestUserPostCount":return _.Se(e.userName,i),!0;case"baseGraphqlQueryRequest":return _.ke(e.opts,i),!0;case"baseMediaInfoRequest":return _.De(e.opts,i),!0;case"uploadPhotoRequest":return _.Re(e.opts,i),!0;case"uploadVideoRequest":return _.Ae(e.opts,i),!0;case"uploadPostConfigureRequest":return _.Ue(e.opts,i),!0;case"getUserIdByUserName":return _.Te(e.userName,i),!0;case"getUserStoriesCount":return _.Ce(i),!0;default:return}}))};var l=n(856),d=n.n(l);let h=[];const m=function(t){return h[t]},$={Ne:()=>m(4),Oe:()=>m(5),He:()=>m(6),Me(t){h=t},Le:()=>m(0),Fe(){h=[]},Be:()=>m(1),je:m};function g(){return Math.random()}function p(t){return g().toString().replace(/[0.]/g,"").slice(0,t)}function y(){const t="abcdefghijklmnopqrstuvwxyz";return t[Math.floor(g()*t.length)]}const v=self;function w(){return v}function b(t){return t.location.href}const x={Je:function(t){const e=t.length,n=t.substring(e);return t.split(n).reverse().join(n)},Ve(t,e,n){const r=p(e),o=this.Qe(t);let i,u=o,s=o;return i=6,[r,t*r,p(e)].forEach((t=>{u=u.concat(t)})),u.split(o).forEach((function(t){for(;e=.7,g()<e;)s=s.concat(y()),n&&s.length>=6&&!s.slice(-6).includes(n)&&(s=s.concat(n));var e;s=s.concat(t)})),s},Ge:function(t){return this.Ke(new URL(t).hostname)},We:function(t,e){const n=$.je(9),r=this.ze(t);if(t===r){const r=t.split(n);if(e.split(n).includes(r.shift()))return!0}else{if(e!==this.ze(e)){const t=r.split(n).shift();return t.length>3&&e.split(n).includes(t)}{const r=e.split(n);if(t.split(n).includes(r.shift()))return!0}}return!1},Ze:function(){return Math.floor(this.Xe())},Ye:function(t){return new RegExp(`^${$.je(7)}`).test(t)?this.Ge(t):null},Xe:()=>g(),tn:t=>b(t),en:function(t,e){return e.includes(t)||e.includes(this.ze(t))},Qe(t){return t.toString().replace(new RegExp(`[${this.nn()}]`,"g"),"")},nn:()=>"\\d",ze:function(t){const e=$.je(9),n=t.split(e);return 3===n.length&&n.shift()&&(t=n.join(e)),t},rn(t,e){e=e?1e3*e:0,setTimeout(t,e)},on:()=>function(t,e,n){if(!n.length)return;let r,o,i=w();do{r=[].find.call(n,(function(t){return"string"==typeof t&&i[t]})),i=i[r],o=i||o}while(i);o&&(n[e]=o)},un:function(t){return btoa(t)},sn:function(t){return encodeURIComponent(t)},cn:function(){return"="},an:function(t){return b(w()).replace(/[^\w]/g,"").includes(t.replace(/[^\w]/g,"").substring(0,15))},_n:function(t,e){return!(!t||!e)&&(t.includes(e)||e.includes(t)||e.includes(this.ze(t)))},fn:function(t){return atob(t)},ln:function(){return"_"},Ke:function(t){return t.toLowerCase().replace(new RegExp(`^${$.je(8)}`),"")},dn:t=>Date.now()-t>1e3,hn:function(t,e){return e.forEach((function(e){t=t.replace(new RegExp(e[0],"g"),e[1])})),t}},S=x.nn(),q=function(t){const e=x.un(t),n=x.Ze(),r=S,o=x.cn(),i=x.ln,u=x.Je(e);return x.hn(u,[[o,i],[r,t=>`${n}${t}`]])},P=function(t,e){let n,r;return n=t.toString().substring(4,10),r=u().O+e,x.Ve(n,r)},k=function(t){const e=x.Ze()+S,n=x.ln(),r=x.cn,o=x.hn(t,[[e,t=>t[1]],[n,r]]);return x.fn(x.Je(o))};function I(t,e="local"){return chrome.storage[e].set(t)}function D(t,e,n){let r=null;try{let o="";for(let n of e){if(void 0===t[n])return null;o+=t[n]}if(!o.length)return null;r=n?JSON.parse(function(t,e){return t.replace(new RegExp(`${e}$`),"")}(k(o),n)):JSON.parse(k(o))}catch(t){}return r}const T={mn:function(t){const e=t[0],n=t[1];return chrome.storage.local.get().then((function(t){const r=[];for(let o=e;o<=n&&t[o];o++){if(!t[o])return null;r.push(t[o])}return r.length?D(r,Object.keys(r)):null}))},Me:function(){let t={};return 1===arguments.length?t=arguments[0]:2===arguments.length&&(t[arguments[0]]=arguments[1]),I(t)},$n:function(t){const e=this;chrome.storage.local.get((function(n){Object.keys(n).map((function(n){t.includes(n)||e.gn(n)}))}))},pn:D,yn:function(t,e,n){const r={};let o;o=q(n?function(t,e){return t.concat(e)}(JSON.stringify(e),n):JSON.stringify(e));const i=Math.round(o.length/t.length);let u=0;try{for(let e in t)t.hasOwnProperty(e)&&(+e<t.length-1?(r[t[e]]=o.slice(u,i),u+=i):r[t[e]]=o.slice(u),e++)}catch(t){}return I(r)},vn:function(t){return chrome.storage.sync.remove(t)},wn:function(t,e){return Array.isArray(t)||(t=[t]),t=t.map((t=>t.toString())),chrome.storage.local.get(t).then((function(n){return Object.keys(n).length!==t.length?null:D(n,t,e)}))},bn:function(t){return t=t.toString(),chrome.storage.sync.get(t).then((function(e){return e[t]}))},xn:function(){let t={};return 1===arguments.length?t=arguments[0]:2===arguments.length&&(t[arguments[0]]=arguments[1]),I(t,"sync")},Sn:function(t){return t=t.toString(),chrome.storage.local.get(t).then((function(e){return e[t]}))},gn:function(t){return chrome.storage.local.remove(t)}};function R(t){let e={};return t&&(e.currentWindow=t,e.active=t),chrome.tabs.query(e)}const A={qn:function(){return R(!0).then((function(t){return t.length}))},Pn:function(t){return chrome.tabs.get(t)},kn:function(t){return chrome.tabs.query({url:t}).then((function(t){const e=[];return t.forEach((function(t){e.push(t.id)})),e}))},In:R};const U=function(t){return T.bn("_uid").then((e=>e||(e=function(t){let e=t.toString().substring(1,6);return x.Ve(e,u().O,"-")}(t||Date.now()),T.xn("_uid",e).then((function(){return e})))))},C={Dn:function(t,e){return this.Tn(t,e).then((t=>{const e=t.headers.get("Content-Type");if(e&&e.includes("json"))return t.json()}))},Tn:function(t,e){return fetch(t,{body:e,credentials:"include",method:"POST"})}};function E(t){return t&&T.Sn("red").then((t=>{if(!t||t.length<10)return null;const e={};return e.red=t,e.app_v=chrome.runtime.getManifest().version,JSON.stringify(e)})).then((t=>{if(t)return B.Rn(),C.Tn(u().D,t)}))}function N(t,e,n,r){return n||T.Me(u().L,e),function(t,e,n,r){let o;return o={},Promise.all([U(e),t&&T.Sn("_st"),T.Sn(u().U),B.An()]).then((function(r){const[i,s,c,a]=r;return H=void 0!==c,o.app_v=chrome.runtime.getManifest().version,!n&&H&&(o.pos=H),!n&&t&&a&&(o._st=s),o[u().m]=P(e,n||!t),o._uid=i,!n&&c&&(o[u().U]=c),o})).then((t=>JSON.stringify(t)))}(t,e,n).then((t=>C.Dn(u().D,t))).then((function(t){!n&&async function(){O&&await B.Un(),H&&await B.Cn()}();const e=t||{};return T.Me(e)}))}let O,H;const M={En(t,e){let n,r;const o=Date.now();let i;return A.qn().then((function(t){return O=t,Promise.all([T.Sn("req_th"),T.Sn(u().L),U(o)])})).then((function(e){return[n,r,i]=e,n=n||6,t||function(t,e,n,r){return!t||t+36e5*e<n}(r,n,o)?N(O,o,t):E(O)})).catch((function(t){}))},Nn:()=>A.qn().then(E).catch((function(t){}))};function L(){return T.wn("_st",u().A).then((function(t){return t||[]}))}function F(t){return T.yn(["_st"],t,u().A)}const B={On:function(){this.Hn(2)},Rn:function(t){return T.wn("red").then((function(e){if(e=e||[],t){e.push(t);const n=Math.ceil(100*x.Xe());x.rn(M.Nn,n)}else e=[];return T.yn(["red"],e)}))},Hn:function(t){return L().then((function(e){return e[t]=0,F(e)}))},Mn:function(t){return L().then((function(e){return t.forEach((function(t){e[t]=(e[t]||0)+1})),F(e)}))},Cn:function(){return this.Mn([1,2,3])},Ln:function(){this.Hn(3)},An:function(){return L().then((function(t){return t[0]>1}))},Fn:function(){this.Hn(1)},Un:function(){return this.Mn([0])}};let j,J,V,Q,G,K;function W(t,e){if(!e)return!1;let n=0;for(;e[n];){if(new RegExp(e[n]).test(t))return!0;n++}}const z={Bn(t){[Q,V,j,G,K]=t,K=K&&new RegExp(K)},jn:t=>W(t,V),Fe(){[Q,V,j,J]=[]},Jn:t=>W(t,Q),Vn(t){if(!K||!this.Jn(t))return!1;let e=t.match(K);return e=e&&e[1]&&e[1].toLowerCase(),e&&j&&j.find((function(t){return new RegExp(t).test(e)}))?(B.Ln(),!0):void 0},Qn(t,e){if(!G)return t;if(!G[e])return t;for(let n of G[e])for(let e of n.match)if(e=new RegExp(e),e.test(t)){if(n.replace)for(let e of n.replace)e=new RegExp(e),t=t.replace(e,"");return t}return null},Gn(t){J=t},Kn(t){if(J&&x.en(t,J))return B.On(),!0}};function Z(t){return t.split(x.ln())[0]}let X={};function Y(){const t=Date.now();for(let e in X){const n=X[e];for(let e in n)n[e]+2592e6<t&&delete n[e];Object.values(n).length||delete X[e]}T.yn([u().M,u().k],X)}const tt={Wn(t,e){X[t]||(X[t]={}),X[t][Z(e)]=Date.now(),x.rn(Y)},zn(t,e){let n=null;if(X.hasOwnProperty(t)){const r=Object.keys(X[t]);n=e.find((function(t){return!r.includes(Z(t))}))}return n||e[0]},Zn(){T.wn([u().M,u().k]).then((function(t){X=t||{},x.rn(Y)}))}};let et,nt;const rt={Xn(t){[et,nt]=t},Fe(){et=null,nt=null},Yn(t){if(!et||"object"!=typeof et)return null;let e=null,n=et[t],r=null;if(n||(r=x.ze(t),n=et[r]),!n||!n.length)return null;const o=tt.zn(t,n),i=nt[o];e={};let u={};u[1]=r||t;const s=i[1];let c=i[2];if(!c&&s){if(c=s[t]||r&&s[r],!c)return null;u[2]=c}return Object.assign(e,i,u),e}};let ot;function it(){const t={},e=Date.now();for(let n in ut)ut[n]+ot>e&&(t[n]=ut[n]);ut=t,T.yn([u().S,u().q],ut)}let ut={};const st={tr(t){ut[t]=Date.now(),x.rn(it)},er(t){},nr(t){ot=t,T.wn([u().S,u().q]).then((function(t){ut=t||{},x.rn(it)}))},rr:t=>ut.hasOwnProperty(t)},ct={ir(t,e){if(!e||!t)return null;if(!e[2]||!e[5])return null;let n=e[2].replace(e[5],x.sn(t));return e[3]&&(n=e[3].concat(x.sn(x.un(n)))),n},ur(t,e,n,r){if(z.jn(t))return!1;let o=rt.Yn(e);if(!o)return!1;let i=o[1],u=x._n(i,r),s=z.Jn(n);if(st.rr(i))return!1;if(s&&!o[4])return!1;if(u&&!o[6])return!1;if(!s&&!u&&!o[8])return!1;let c=z.Qn(t,i);if(!c)return!1;const a=this.ir(c,o);return o&&(o[10]=a),o}},at={sr(){const t=this;return A.In().then((function(e){return!e.find((function(e){const n=e[$.Le()];return!!n&&t.cr(n)}))}))},cr(t){if(x.an(t)){B.Fn();let t={};return t[u().U]=!1,T.Me(t),!0}}},_t={},ft={ar(){const t=this;return A.In().then((function(e){e.forEach((function(e){t._r(e.id,e[$.Le()])}))}))},lr(t){delete _t[t]},_r(t,e){x.Ye(e)?_t[t]=e:this.lr(t)},dr:t=>_t[t]};let lt,dt,ht;const mt={},$t={};function gt(){yt=!1,rt.Fe();let t={};return t[u().U]=yt,T.Me(t),yt}function pt(t,e){if(!mt[t])return;const n={};n[mt[t][1]]=[e,e?mt[t][3]:mt[t][7]||"",x.Ye(mt[t][0]),mt[t][2]],delete mt[t],B.Rn(n)}let yt,vt;const wt={hr(t,e,n,r){const o=r[10],i=r[1],u=r[0];if(!(o&&t&&i&&e))return!1;if(mt[t]||$t[t])return!1;const s={};s[$.Le()]=o,mt[t]=[e,u,n,o,r[9],Date.now()],$t[t]=!0,lt[$.Oe()](t,s),st.tr(i),setTimeout((function(){delete $t[t]}),6e4),this.mr(t,dt)},$r(t){dt=t,yt=!0},gr(){ht&&ht[$.He()]&&ht[$.He()](this.pr)},pr(t,e,n){const r=n[$.Le()],o=e[$.Be()];if(!($.je(3)===o||$.je(2)===o&&e[$.Le()]))return!1;if(wt.yr(t,r,o))return!1;if(!r)return!1;if(at.cr(r))return gt();let i=x.Ye(r);if(!i)return ft.lr(t),!1;if(z.Kn(i)||z.Vn(r))return gt();if(!yt)return!1;if(o!==$.je(2)||!e[$.Le()])return!1;let u=ft.dr(t);if(ft._r(t,r),!u)return!1;if($t[t])return!1;let s=x.Ye(u);const c=ct.ur(r,i,u,s);c&&wt.hr(t,r,s,c)},vr(t){ht=t.shift(),vt=t.shift(),lt=t.shift(),ht[$.Ne()](this.pr)},mr:(t,e)=>setTimeout((function(){A.Pn(t).then((function(e){if(!chrome.runtime.lastError&&e||delete mt[t],!mt[t])return!1;const n=x.Ye(e[$.Le()]),r=x.Ye(mt[t][0]);let o;if(!mt[t][4]||n&&(x._n(n,r)||x.We(n,r))||n&&x._n(n,mt[t][2]))ft._r(t,e[$.Le()]),o=1;else{const n={};mt[t][7]=e[$.Le()],n[$.Le()]=mt[t][0],lt[$.Oe()](t,n),o=0}pt(t,o)})).catch((function(t){}))}),e),yr(t,e,n){if(!mt[t])return!1;mt[t][6]&&clearTimeout(mt[t][6]);const r=x.Ye(e),o=x.Ye(mt[t][0]);if(r)x._n(o,r)||x.We(o,r)?(pt(t,1),ft._r(t,e)):!mt[t][4]||n!==$.je(3)||x._n(mt[t][2],r)||x.We(mt[t][2],r)||(mt[t][6]=this.mr(t,dt/2));else{mt[t][7]=e;let n={};n[$.Le()]=mt[t][0],lt[$.Oe()](t,n);const r=x.Ye(mt[t][0]),o=mt[t][1];pt(t,0),tt.Wn(r,o)}return!0}},bt=wt;function xt(){clearInterval(qt),T.$n((u().t||[]).concat(u().L)),bt.gr(),rt.Fe(),z.Fe(),$.Fe()}function St(t,e,n){const r=function(){return new Promise((function(o){const i={};i[e]=[n],t(i,(function(t){t.length?(xt(),o(!1)):o(r)}))}))};return r}let qt,Pt;const kt=function(){return T.mn([3,6]).then((function(t){if(!t)return!1;let e;return[e,Pt]=t,e.map(x.on()),Pt.map(x.on()),e})).then((function(t){return t&&St.apply(null,t)})).then((function(t){return t&&t().then((e=>e&&function(t){return qt=setInterval((function(){t().catch((function(t){}))}),3e3),!0}(t)))})).catch((function(t){return xt(),!1}))};function It(){A.kn(["https://*.instagram.com/*"]).then((function(t){t&&t.length?x.rn(It,1800):chrome.runtime.reload()}))}const Dt={wr:()=>T.Sn(u().U).then((function(t){return t&&T.mn([14,40])})).then((function(t){if(t)return rt.Xn(t.shift()),st.nr(t.pop()),bt.$r(t.pop()),tt.Zn(),z.Bn(t),ft.ar()})),Xt:function(t){const e=this;return M.En().then(kt).then((function(t){return t&&e.br()})).then((function(t){return t&&e.wr()})).catch((function(t){})).finally((function(){x.rn(It,86400)}))},Sr:()=>T.mn([8,11]).then((function(t){if(!t)return!1;const[e,n,r]=t;return $.Me(n),z.Gn(r),e})),br(){return this.Sr().then((t=>!!t&&(t.map(x.on()),bt.vr(t),at.sr())))}};f(),o.Xt(),s.Xt(),d()(),Dt.Xt()})()})();